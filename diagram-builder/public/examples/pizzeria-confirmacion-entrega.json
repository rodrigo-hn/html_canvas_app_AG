{
  "nodes": [
    {
      "id": "pool-main",
      "type": "shape",
      "shapeType": "bpmn-pool",
      "x": 40,
      "y": 120,
      "width": 1820,
      "height": 820,
      "zIndex": 0,
      "data": { "text": "Proceso de Pedido de Pizzeria" },
      "style": { "fill": "transparent", "stroke": "#0f172a", "strokeWidth": 2 }
    },
    {
      "id": "lane-cliente",
      "type": "shape",
      "shapeType": "bpmn-lane",
      "x": 40,
      "y": 120,
      "width": 1820,
      "height": 560,
      "zIndex": 0,
      "data": { "text": "" },
      "style": { "fill": "transparent", "stroke": "#0f172a", "strokeWidth": 2 }
    },
    {
      "id": "lane-repartidor",
      "type": "shape",
      "shapeType": "bpmn-lane",
      "x": 40,
      "y": 690,
      "width": 1820,
      "height": 250,
      "zIndex": 0,
      "data": { "text": "" },
      "style": { "fill": "transparent", "stroke": "#0f172a", "strokeWidth": 2 }
    },

    {
      "id": "header-cliente",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 55,
      "y": 136,
      "width": 170,
      "height": 72,
      "zIndex": 1,
      "data": { "text": "Cliente" },
      "style": { "fill": "#eef2ff", "stroke": "#334155", "strokeWidth": 2 }
    },
    {
      "id": "header-repartidor",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 55,
      "y": 706,
      "width": 220,
      "height": 72,
      "zIndex": 1,
      "data": { "text": "Repartidor" },
      "style": { "fill": "#ecfeff", "stroke": "#334155", "strokeWidth": 2 }
    },

    {
      "id": "ev-start",
      "type": "shape",
      "shapeType": "bpmn-start-event",
      "x": 105,
      "y": 370,
      "width": 70,
      "height": 70,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#ffffff", "stroke": "#334155", "strokeWidth": 2 }
    },
    {
      "id": "task-recibir",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 255,
      "y": 348,
      "width": 250,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Recibir Orden" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "gateway-confirmado",
      "type": "shape",
      "shapeType": "bpmn-gateway-exclusive",
      "x": 780,
      "y": 340,
      "width": 110,
      "height": 110,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#fef3c7", "stroke": "#854d0e", "strokeWidth": 2 }
    },

    {
      "id": "task-validar-insumos",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 560,
      "y": 488,
      "width": 230,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Validar Insumos" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "task-preparar",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 840,
      "y": 488,
      "width": 230,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Preparar Pizza" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "task-hornear",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 1120,
      "y": 488,
      "width": 220,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Hornear Pizza" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "task-empacar",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 1390,
      "y": 488,
      "width": 220,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Empacar Pedido" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "task-entregar",
      "type": "shape",
      "shapeType": "bpmn-task",
      "x": 1650,
      "y": 488,
      "width": 170,
      "height": 108,
      "zIndex": 3,
      "data": { "text": "Entregar Pedido" },
      "style": { "fill": "#ffffff", "stroke": "#1f2937", "strokeWidth": 2 }
    },

    {
      "id": "ev-entregado",
      "type": "shape",
      "shapeType": "bpmn-end-event",
      "x": 1720,
      "y": 346,
      "width": 86,
      "height": 86,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#ecfccb", "stroke": "#3f6212", "strokeWidth": 3 }
    },
    {
      "id": "label-entregado",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 1656,
      "y": 606,
      "width": 190,
      "height": 70,
      "zIndex": 3,
      "data": { "text": "Pedido Entregado" },
      "style": { "fill": "#f8fafc", "stroke": "#334155", "strokeWidth": 1.5 }
    },

    {
      "id": "ev-notificar-rechazo",
      "type": "shape",
      "shapeType": "bpmn-end-event",
      "x": 330,
      "y": 180,
      "width": 84,
      "height": 84,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#fee2e2", "stroke": "#7f1d1d", "strokeWidth": 3 }
    },
    {
      "id": "label-notificar-rechazo",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 430,
      "y": 186,
      "width": 250,
      "height": 72,
      "zIndex": 3,
      "data": { "text": "Notificar Rechazo" },
      "style": { "fill": "#ffffff", "stroke": "#334155", "strokeWidth": 1.5 }
    },

    {
      "id": "ev-fin",
      "type": "shape",
      "shapeType": "bpmn-end-event",
      "x": 1330,
      "y": 178,
      "width": 84,
      "height": 84,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#fee2e2", "stroke": "#7f1d1d", "strokeWidth": 3 }
    },
    {
      "id": "label-fin",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 1426,
      "y": 186,
      "width": 110,
      "height": 70,
      "zIndex": 3,
      "data": { "text": "Fin" },
      "style": { "fill": "#ffffff", "stroke": "#334155", "strokeWidth": 1.5 }
    },

    {
      "id": "label-pedido-confirmado",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 706,
      "y": 226,
      "width": 270,
      "height": 96,
      "zIndex": 3,
      "data": { "text": "Pedido\nConfirmado?" },
      "style": { "fill": "#ffffff", "stroke": "#334155", "strokeWidth": 1.5 }
    },
    {
      "id": "label-si",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 940,
      "y": 356,
      "width": 72,
      "height": 44,
      "zIndex": 3,
      "data": { "text": "Si" },
      "style": { "fill": "#ecfccb", "stroke": "#3f6212", "strokeWidth": 1.5 }
    },
    {
      "id": "label-no",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 820,
      "y": 458,
      "width": 72,
      "height": 44,
      "zIndex": 3,
      "data": { "text": "No" },
      "style": { "fill": "#fee2e2", "stroke": "#7f1d1d", "strokeWidth": 1.5 }
    },

    {
      "id": "ev-repartidor",
      "type": "shape",
      "shapeType": "bpmn-intermediate-event",
      "x": 810,
      "y": 760,
      "width": 96,
      "height": 96,
      "zIndex": 3,
      "data": { "text": "" },
      "style": { "fill": "#ecfeff", "stroke": "#155e75", "strokeWidth": 2 }
    },
    {
      "id": "label-repartidor-tarea",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 930,
      "y": 772,
      "width": 320,
      "height": 72,
      "zIndex": 3,
      "data": { "text": "Recoger y Entregar" },
      "style": { "fill": "#ffffff", "stroke": "#334155", "strokeWidth": 1.5 }
    },

    {
      "id": "legend-title",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 60,
      "y": 960,
      "width": 170,
      "height": 48,
      "zIndex": 3,
      "data": { "text": "Leyenda" },
      "style": { "fill": "#e2e8f0", "stroke": "#334155", "strokeWidth": 1.5 }
    },
    {
      "id": "legend-success",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 250,
      "y": 960,
      "width": 210,
      "height": 48,
      "zIndex": 3,
      "data": { "text": "Verde = resultado exitoso" },
      "style": { "fill": "#ecfccb", "stroke": "#3f6212", "strokeWidth": 1.5 }
    },
    {
      "id": "legend-error",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 480,
      "y": 960,
      "width": 230,
      "height": 48,
      "zIndex": 3,
      "data": { "text": "Rojo = rechazo o cierre" },
      "style": { "fill": "#fee2e2", "stroke": "#7f1d1d", "strokeWidth": 1.5 }
    },
    {
      "id": "legend-flow",
      "type": "shape",
      "shapeType": "rounded-rectangle",
      "x": 730,
      "y": 960,
      "width": 260,
      "height": 48,
      "zIndex": 3,
      "data": { "text": "Punteado = mensaje/asociacion" },
      "style": { "fill": "#f8fafc", "stroke": "#334155", "strokeWidth": 1.5 }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "sourceId": "ev-start",
      "targetId": "task-recibir",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e2",
      "sourceId": "task-recibir",
      "targetId": "gateway-confirmado",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e3",
      "sourceId": "task-recibir",
      "targetId": "task-validar-insumos",
      "sourcePort": "bottom",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e4",
      "sourceId": "task-validar-insumos",
      "targetId": "task-preparar",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e5",
      "sourceId": "task-preparar",
      "targetId": "task-hornear",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e6",
      "sourceId": "task-hornear",
      "targetId": "task-empacar",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e7",
      "sourceId": "task-empacar",
      "targetId": "task-entregar",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e8",
      "sourceId": "task-entregar",
      "targetId": "ev-entregado",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e9",
      "sourceId": "gateway-confirmado",
      "targetId": "task-empacar",
      "sourcePort": "right",
      "targetPort": "top",
      "flowType": "sequence",
      "label": "Si",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e10",
      "sourceId": "gateway-confirmado",
      "targetId": "task-preparar",
      "sourcePort": "bottom",
      "targetPort": "top",
      "flowType": "sequence",
      "label": "No",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e11",
      "sourceId": "ev-notificar-rechazo",
      "targetId": "task-recibir",
      "sourcePort": "bottom",
      "targetPort": "top",
      "flowType": "message",
      "zIndex": 1,
      "points": [],
      "markerEnd": "open-arrow",
      "markerStart": "open-circle",
      "style": { "stroke": "#1f2937", "strokeWidth": 2, "dashArray": "6 4" }
    },
    {
      "id": "e12",
      "sourceId": "ev-fin",
      "targetId": "task-entregar",
      "sourcePort": "bottom",
      "targetPort": "top",
      "flowType": "message",
      "zIndex": 1,
      "points": [],
      "markerEnd": "open-arrow",
      "markerStart": "open-circle",
      "style": { "stroke": "#1f2937", "strokeWidth": 2, "dashArray": "6 4" }
    },
    {
      "id": "e13",
      "sourceId": "header-repartidor",
      "targetId": "ev-repartidor",
      "sourcePort": "right",
      "targetPort": "left",
      "flowType": "sequence",
      "zIndex": 1,
      "points": [],
      "markerEnd": "arrow",
      "style": { "stroke": "#1f2937", "strokeWidth": 2 }
    },
    {
      "id": "e14",
      "sourceId": "ev-repartidor",
      "targetId": "task-entregar",
      "sourcePort": "top",
      "targetPort": "bottom",
      "flowType": "association",
      "zIndex": 1,
      "points": [],
      "style": { "stroke": "#334155", "strokeWidth": 2, "dashArray": "3 4" }
    },
    {
      "id": "e15",
      "sourceId": "label-pedido-confirmado",
      "targetId": "gateway-confirmado",
      "sourcePort": "bottom",
      "targetPort": "top",
      "flowType": "association",
      "zIndex": 1,
      "points": [],
      "style": { "stroke": "#334155", "strokeWidth": 2, "dashArray": "3 4" }
    }
  ]
}
